# 요구사항명세서

## 감성 이커머스

---

### 개요

**좋아요** 누르고, **쿠폰** 쓰고, 포인트로 **결제**하는 **감성 이커머스**.

내가 좋아하는 브랜드의 상품들을 한 번에 담아 주문하고, 유저 행동은 랭킹과 추천으로 연결됩니다.

사용자가 **회원가입**을 하고 다양한 브랜드 상품을 둘러보다가, 마음에 드는 상품에 **좋아요**를 누릅니다.

유저의 행동은 모두 기록되며, 이 데이터는 **추천, 혜택** 등 다양한 기능으로 확장될 수 있어요.

# **요구사항 (Requirements)**

---

## **상품 목록 조회(Product List)**

**✅ 기능적 요구사항 (Functional Requirements)**

- **Happy Path**
  - [ ]  사용자는 상품 목록을 조회할 수 있다.
  - [ ]  사용자는 상품 목록 조회 시 브랜드 필터링이 가능하다.
  - [ ]  사용자는 페이징처리로 상품 목록을 조회할 수 있다.
  - [ ]  사용자는 상품 정보에는 총 좋아요 수가 포함되어야 한다.
  - [ ]  사용자는 최신순, 가격, 좋아요 정렬이 가능하다.
  - [ ]  사용자는 카테고리별 상품목록을 조회할 수 있다.
  - [ ]  사용자는 브랜드별 상품록록을 조회할 수 있다.
- **Fail Cases**
  - [ ]  사용자는 브랜드 필터링 시 존재하지 않는 브랜드를 조회하면 “오류를 반환한다”
  - [ ]  사용자는 카테고리 필터링 시 존재하지 않는 카테고리를 조회하면 “오류를 반환한다”

**⚙️ 비기능적 요구사항 (Non-Functional Requirements)**

- 상품 목록 조회는 1초 이내에 응답해야 한다. ( 완료되지 않으면 오류로 간주한다. )
- 조회 시점에, 상품별 재고수량을 정확하면 조회한다. (동시성 제어)
- 정렬 기준은 `최신순`을 기본으로 제공하고, 필요 시 `가격순`, `좋아요순`으로 확장 가능해야 한다.
- 브랜드 기준으로 필터링할 수 있다.
- 카테고리 기준으로 필터링할 수 있다.
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

| 케이스 | 설명 | HTTP 상태코드 |
| --- | --- | --- |
| 카테고리 미존재 | 해당 페이지의 카테고리가 존재하지 않는 경우 | 404 Not Found |
| 브랜드 미존재 | 해당 페이지의 브랜드가 존재하지 않는 경우 | 404 Not Found |

---

## 상품 상세 조회 **(Product Detail)**

**✅ 기능적 요구사항 (Functional Requirements)**

- **Happy Path**
  - [ ]  사용자는 상품 식별자로 상품 상세 정보를 조회할 수 있다.
  - [ ]  사용자는 판매가능 여부를 확인할 수 있다.
  - [ ]  사용자는 본인의 좋아요 여부를 확인할 수 있다.
- **Fail Cases**
  - [ ]  상품이 존재하지 않으면 “오류를 반환한다.”

**⚙️ 비기능적 요구사항 (Non-Functional Requirements)**

- 상품 정보 조회는 1초 이내에 완료되어야 한다. (완료되지 않으면 오류로 간주한다.)
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

| 케이스 | 설명 | HTTP 상태코드 |
| --- | --- | --- |
| 상품 미존재 | 해당 페이지의 상품이 존재하지 않는 경우 | 404 Not Found |

---

## **브랜드 상세 조회 (Brand Detail)**

**✅ 기능적 요구사항 (Functional Requirements)**

- **Happy Path**
  - [ ]  사용자는 브랜드 식별자로 브랜드 정보를 조회할 수 있다.
  - [ ]  사용자는 브랜드별 상품록록을 조회할 수 있다.
- **Fail Cases**
  - [ ]  브랜드가 존재하지 않으면 “오류를 반환한다.”

**⚙️ 비기능적 요구사항 (Non-Functional Requirements)**

- 브랜드 정보 조회는 1초 이내에 완료되어야 한다. (완료되지 않으면 오류로 간주한다.)
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

| 케이스 | 설명 | HTTP 상태코드 |
| --- | --- | --- |
| 브랜드 미존재 | 해당 페이지의 브랜드가 존재하지 않는 경우 | 404 Not Found |

---

## **상품 좋아요 (Like)**

**✅ 기능적 요구사항 (Functional Requirements)**

- **Happy Path**
  - [ ]  로그인한 사용자는 상품에 좋아요를 등록할 수 있다.
  - [ ]  로그인한 사용자는 상품에 좋아요를 취소할 수 있다.
  - [ ]  같은 상품에 중복해서 좋아요를 등록해도 1번만 적용된다.
- **Fail Cases**
  - [ ]  로그인하지 않은 사용자에게는 “오류를 반환한다”

**⚙️ 비기능적 요구사항 (Non-Functional Requirements)**

- 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다.
- 좋아요 등록/취소 요청은 멱등하게 처리되어야 한다.
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

| 케이스 | 설명 | HTTP 상태코드 |
| --- | --- | --- |
| 존재하지 않는 유저 | 사용자 정보가 없는 경우 | 401 UnAuthorized |
| 좋아요 중복 등록 | 중복으로 좋아요를 등록 및 취소한 겨 | 409 Conflict |
| 상품 미존재 | 상품이 존재하지 않는 경우 | 404 NotFound |

---

## **주문 생성 및 결제 (Order)**

**✅ 기능적 요구사항 (Functional Requirements)**

- **Happy Path**
  - [ ]  사용자는  [상품 식별자, 수량]여러 상품을 한 번에 주문할 수 있다.
  - [ ]  주문 시 각 상품의 재고가 충분한지 검증하고, 재고를 차감해야 한다.
  - [ ]  주문 금액만큼 사용자의 포인트를 차감해야 한다.
  - [ ]  주문 성공 시 외부 시스템에 주문 정보를 전송해야 한다.
  - [ ]  사용자는 자신의 주문 목록과 주문 상세 정보를 조회할 수 있다.
  - [ ]  사용자가 주문을 하면 재고가 차감된다.
- **Fail Cases**
  - [ ]  로그인하지 않은 사용자에게는 “오류를 반환한다”

**⚙️ 비기능적 요구사항 (Non-Functional Requirements)**

- 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다.
- 주문 생성은 트랜잭션 단위로 처리되어야 한다.
- 주문시 재고차감을 하게되면 재고를 선점한다.
- 동시 주문 요청에서도 재고와 포인트가 정확히 차감되어야 한다.
- 외부 결제 시스템 연동 실패 시 주문 자체는 유지되어야 한다.
- 주문 데이터는 비정상 중복 결제를 방지해야 한다 (중복 방지 키 등).
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

| 케이스 | 설명 | HTTP 상태코드 |
| --- | --- | --- |
| 존재하지 않는 유저 | 사용자 정보가 없는 경우 | 401 UnAuthorized |
| 상품 판매 불가 | 주문하려는 상품이 판배 불가(품절) 상태인 경우 | 409 Conflict |
| 상품 미존재 | 상품이 존재하지 않는 경우 | 404 NotFound |
| 재고보다 많은 수량 주문 | 재고보다 많은 수량을 주문한 경우 | 409 Conflict |
| 외부 결제 시스템 연동 실패 | 외부 결제 시스템 API 콜 실패한 경우 | 500 Internal Server Error |